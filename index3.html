<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- from https://fullcalendar.io/docs/initialize-globals -->
    <meta charset='utf-8' />
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.15/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.15/index.global.min.js'></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            window.calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridWeek',
                events: []
            });
            calendar.render();
        });
    </script>
    <title>Smart Time Manager</title>
</head>
<body>
    
    <div class="container mt-5">
        <!-- Privacy Policy Modal -->
        <div id="privacyModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Privacy Policy</h5>
                    </div>
                    <div class="modal-body">
                        <p>We collect and store your deadlines and time logs locally on your device. 
                        Some data is sent to our API, which is then sent to Amazon Alexa allowing
                        you more access to your deadlines.
                        You can delete your data at any time.</p>
                        <p><input type="checkbox" id="consentCheckbox"> I agree to the Privacy Policy.</p>
                    </div>
                    <div class="modal-footer">
                        <button id="acceptPrivacy" class="btn btn-primary">Accept</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <!-- Left Section: Event Form & Table -->
            <div class="col-md-6">
                <h1 class="text-center mb-4">Smart Time Manager</h1>
        
                <!-- Event Input Form -->
                <form id="eventForm" class="mb-4">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <input type="text" id="eventInput" class="form-control" placeholder="Event" required>
                        </div>
                        <div class="col-md-4">
                            <input type="date" id="dateInput" class="form-control" required>
                        </div>
                        <div class="col-md-4">
                            <input type="time" id="timeInput" class="form-control" required>
                        </div>
                    </div>
                    <div class="text-center mt-3">
                        <select class="form-select" id="priorityInput">
                            <option value="">Set Priority...</option>
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                        </select>
                    </div>
                    <div class="text-center mt-3">
                        <button type="submit" class="btn btn-primary">Add Event</button>
                    </div>
                </form>

                <div id="missedEventsContainer" style="display: none;">
                    <h3>Missed Events</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Event</th>
                                <th>Date</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody id="missedEventsTableBody"></tbody>
                    </table>
                </div>
        
                <!-- Events Table -->
                <h3>Upcoming Events</h3>
                <table class="table table-striped mb-5">  <!-- Added margin-bottom -->
                    <thead>
                        <tr>
                            <th>Event</th>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Priority</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                <tbody id="eventsTableBody"></tbody>
                </table>

                <!-- Time Plan Section -->
                <div class="row g-2">
                    <div class="col-md-6">
                        <label for="startWorkTime" class="form-label">Start Work Time:</label>
                        <input type="time" id="startWorkTime" class="form-control" placeholder="Start Work At..." required>
                    </div>
                    <div class="col-md-6">
                        <label for="endWorkTime" class="form-label">End Work Time:</label>
                        <input type="time" id="endWorkTime" class="form-control" placeholder="End Work At..." required>
                    </div>
                
                <div class="text-center mt-3">
                    <button id="saveWorkHours" class="btn btn-info">Save Work Hours</button>
                </div>

                <h3 class="mt-5">Today's Time Plan</h3>
                <div id="timePlanContainer" class="border p-3 rounded bg-light">
                    <p>No time plan available yet.</p>
                </div>
            </div>
                <!-- Delete Data Button -->
                <div class="text-center mt-3">
                    <button id="deleteData" class="btn btn-danger">Delete My Data</button>
                </div>
            </div>

        
            <!-- Right Section: Calendar -->
            <div class="col-md-6">
                <div id="calendar"></div>

                <!-- Time Log Form -->
                <h3 class="mt-2">Daily Time Log</h3>
                <form id="timeLogForm" class="mb-4">
                <div class="row g-3">
                    <div class="col-md-4">
                    <input type="text" id="activityInput" class="form-control" placeholder="Activity (e.g., YouTube, Gaming)" required>
                    </div>
                    <div class="col-md-4">
                    <input type="number" id="hoursInput" class="form-control" placeholder="Hours" min="0">
                    </div>
                    <div class="col-md-4">
                    <input type="number" id="minutesInput" class="form-control" placeholder="Minutes" min="0" max="59">
                    </div>
                </div>
                <div class="text-center mt-3">
                    <button type="submit" class="btn btn-success">Log Activity</button>
                </div>
                </form>
        
                <!-- Time Log Table -->
                <h3>Time Log History</h3>
                <table class="table table-striped">
                <thead>
                    <tr>
                    <th>Date</th>
                    <th>Activity</th>
                    <th>Duration</th>
                    </tr>
                </thead>
                <tbody id="timeLogHistory"></tbody>
                </table>

            </div>
            
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script3.js"></script>
</body>